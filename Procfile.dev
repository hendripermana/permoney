# Development Procfile with Performance Optimization
# Uses YJIT for 12-40% performance boost
# jemalloc is configured at Ruby compilation level (see docs/PERFORMANCE_GUIDE.md)

# Web server with YJIT enabled
# OBJC_DISABLE_INITIALIZE_FORK_SAFETY fixes macOS fork issues with Puma workers
web: OBJC_DISABLE_INITIALIZE_FORK_SAFETY=YES RUBY_YJIT_ENABLE=1 bundle exec ${DEBUG:+rdbg -O -n -c --} bin/rails server -b 0.0.0.0

# CSS watcher
css: bundle exec bin/rails tailwindcss:watch 2>/dev/null

# Background worker with YJIT enabled
worker: RUBY_YJIT_ENABLE=1 bundle exec sidekiq
