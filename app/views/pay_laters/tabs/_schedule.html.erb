<%# PayLater Schedule Tab %>
<%= turbo_frame_tag "pay_later_schedule", data: { turbo_action: "advance" } do %>
  <% pay_later = account.accountable %>
  <% installments = pay_later.installments.by_installment_no %>

  <% if installments.any? %>
    <%= render PayLater::InstallmentScheduleComponent.new(
      installments: installments,
      account: account,
      show_actions: true
    ) %>
  <% else %>
    <%# Empty State %>
    <div class="text-center py-12">
      <div class="inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4">
        <%= icon("calendar", class: "w-8 h-8 text-gray-400") %>
      </div>
      <h3 class="text-lg font-semibold text-gray-900 mb-2">No Installments Yet</h3>
      <p class="text-gray-600 mb-6">Record your first purchase to see installments here.</p>
      <%= link_to new_purchase_pay_later_path(account),
          class: "inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",
          data: { turbo_frame: "_top" } do %>
        <%= icon("shopping-cart", class: "w-5 h-5 mr-2") %>
        Record Purchase
      <% end %>
    </div>
  <% end %>
<% end %>
