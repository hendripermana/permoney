<%# locals: (avatar_url: nil, initials: "U", lazy: false) %>

<%# Rails 8.1: Optimized avatar rendering with performance best practices %>
<%# - Uses preprocessed variants for instant display
     - Lazy loading for offscreen images
     - Proper accessibility attributes
     - F1-level performance optimization %>
<div class="w-full h-full bg-surface-inset hover:bg-surface-inset-hover text-secondary rounded-full flex items-center justify-center text-lg uppercase relative">
  <%= initials %>
  <% if avatar_url.present? %>
    <%= image_tag avatar_url, 
        class: "absolute inset-0 rounded-full w-full h-full object-cover", 
        loading: lazy ? "lazy" : "eager",
        alt: "#{initials} profile picture",
        decoding: "async" %>
  <% end %>
</div>
