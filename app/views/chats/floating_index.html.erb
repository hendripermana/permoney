<div class="h-full flex flex-col bg-surface">
  <%# Header %>
  <div class="px-4 py-3 border-b border-border flex items-center justify-between shrink-0">
    <h3 class="font-medium text-foreground">Chat History</h3>
    <%= link_to new_chat_path(floating: true), 
        class: "p-2 hover:bg-surface-inset rounded-lg text-primary transition-colors",
        title: "New Chat",
        data: { turbo_frame: "floating_chat_content" } do %>
      <%= icon("plus", size: "sm") %>
    <% end %>
  </div>

  <%# Content %>
  <div class="flex-1 overflow-y-auto p-2 space-y-1">
    <% if @chats.any? %>
      <% @chats.each do |chat| %>
        <%= link_to chat_path(chat, floating: true), 
            class: "block p-3 rounded-xl hover:bg-surface-inset transition-all duration-200 group border border-transparent hover:border-border/50",
            data: { turbo_frame: "floating_chat_content" } do %>
          <div class="flex items-start justify-between gap-2">
            <div class="min-w-0">
              <p class="text-sm font-medium text-foreground truncate group-hover:text-primary transition-colors">
                <%= chat.title.presence || "New Chat" %>
              </p>
              <p class="text-xs text-secondary truncate mt-0.5">
                <%= time_ago_in_words(chat.created_at) %> ago
              </p>
            </div>
            <%= icon("chevron-right", size: "xs", class: "text-secondary/50 group-hover:text-primary transition-colors mt-1") %>
          </div>
        <% end %>
      <% end %>
    <% else %>
      <div class="h-full flex flex-col items-center justify-center text-center p-6 text-secondary">
        <%= icon("message-square", size: "lg", class: "mb-3 opacity-20") %>
        <p class="text-sm">No chat history yet</p>
        <%= link_to "Start a conversation", new_chat_path(floating: true), 
            class: "mt-4 btn btn-secondary btn-sm",
            data: { turbo_frame: "floating_chat_content" } %>
      </div>
    <% end %>
  </div>
</div>
